# ユースケース例

このページでは、Quincyを使用した実際の開発シナリオでの活用方法を具体例で説明します。

## コード生成のワークフロー

### 新機能開発の例

#### シナリオ: ユーザー認証機能の追加

**Step 1: 要件の整理**
```
新しいユーザー認証システムを作成したいです。
以下の機能が必要です：
- ログイン・ログアウト
- パスワードのハッシュ化
- JWT トークンの生成・検証
- ミドルウェアでの認証チェック

TypeScript + Express で実装してください。
```

**Step 2: 基本構造の生成**
```
まず、認証関連のファイル構造を作成してください：
src/auth/
├── auth.controller.ts
├── auth.service.ts
├── auth.middleware.ts
├── auth.types.ts
└── auth.routes.ts
```

**Step 3: 各ファイルの実装**
```
auth.types.ts に以下のTypeScript型定義を追加してください：
- User interface
- LoginRequest interface
- AuthResponse interface
- JWTPayload interface
```

**Step 4: テストファイルの生成**
```
認証機能のテストファイルを作成してください：
- ユニットテスト（Jest）
- 統合テスト
- モックデータの定義
```

#### 期待される結果
- 完全な認証機能のファイル構造
- 型安全なTypeScriptコード
- 包括的なテストカバレッジ
- 即座に使用可能な実装

### フロントエンド コンポーネント開発

#### シナリオ: ダッシュボード画面の作成

**Step 1: コンポーネント設計**
```
Angular でダッシュボード画面を作成してください。
必要な要素：
- ヘッダー（ナビゲーション）
- サイドバー（メニュー）
- メインコンテンツエリア
- フッター
- レスポンシブデザイン

Signal を使用した状態管理も含めてください。
```

**Step 2: スタイリング**
```
ダッシュボードのCSSスタイルを作成してください：
- モダンで直感的なデザイン
- カードレイアウト
- ダークモード対応
- アニメーション効果
```

**Step 3: データ統合**
```
ダッシュボードにAPIから取得するデータを表示する機能を追加してください：
- ユーザー情報
- 統計データ
- 最近のアクティビティ
- リアルタイム更新
```

## デバッグセッションの例

### バグ修正のワークフロー

#### シナリオ: メモリリークの問題

**Step 1: 問題の特定**
```
以下のエラーが発生しています：
"Maximum call stack size exceeded"

src/services/websocket.service.ts のファイルで発生していると思われます。
問題を特定してください。
```

**Step 2: コード分析**
```
websocket.service.ts の以下のメソッドを分析してください：
- connect()
- disconnect()
- onMessage()
- sendMessage()

メモリリークやスタックオーバーフローの原因を特定してください。
```

**Step 3: 修正の実装**
```
特定された問題を修正してください：
- イベントリスナーの適切なクリーンアップ
- 再帰呼び出しの解決
- メモリ使用量の最適化
```

**Step 4: テストとベリフィケーション**
```
修正後、以下のテストを実行してください：
- 長時間動作テスト
- メモリ使用量の監視
- 接続・切断の繰り返しテスト
```

### パフォーマンス問題の解決

#### シナリオ: アプリケーションの動作が重い

**Step 1: プロファイリング**
```
アプリケーションのパフォーマンスボトルネックを特定してください。
特に以下の観点で：
- バンドルサイズ
- API レスポンス時間
- DOM 操作の効率性
- メモリ使用量
```

**Step 2: 最適化の実装**
```
特定された問題に対して以下の最適化を実装してください：
- 遅延ローディング
- 画像の最適化
- APIリクエストのキャッシュ
- 不要な re-render の削除
```

## リファクタリングの実践例

### コード品質の改善

#### シナリオ: レガシーコードのモダン化

**Step 1: 現状分析**
```
src/legacy/ ディレクトリ内の古いコードを分析してください：
- 非推奨パターンの特定
- 型安全性の問題
- テストカバレッジの不足
- 依存関係の問題
```

**Step 2: リファクタリング計画**
```
以下の順序でリファクタリングを実行してください：
1. TypeScript への移行
2. モダンES6+ 構文への更新
3. 適切なエラーハンドリングの追加
4. テストファイルの作成
5. ドキュメントの更新
```

**Step 3: 段階的実装**
```
一つずつファイルを処理してください：
legacy/user-manager.js → src/services/user.service.ts

変更点：
- class ベースから function ベース
- async/await パターン
- 型定義の追加
- エラーハンドリングの改善
```

### アーキテクチャの改善

#### シナリオ: モノリスからマイクロサービスへ

**Step 1: サービス分割の設計**
```
現在のモノリスアプリケーションを以下のマイクロサービスに分割してください：
- User Service
- Auth Service
- Notification Service
- File Service

各サービスのAPIインターフェースを定義してください。
```

**Step 2: 通信層の実装**
```
サービス間通信のための仕組みを実装してください：
- REST API
- WebSocket通信
- エラーハンドリング
- リトライ機構
```

## 自動化とCI/CDの例

### デプロイメント自動化

#### シナリオ: GitHub Actions の設定

**Step 1: ワークフロー定義**
```
以下の CI/CD パイプラインを GitHub Actions で作成してください：
1. コードプッシュ時の自動テスト
2. プルリクエスト時のコードレビュー自動化
3. メインブランチへのマージ時の自動デプロイ
4. テスト失敗時の通知
```

**Step 2: 設定ファイルの作成**
```
.github/workflows/ci.yml ファイルを作成してください：
- Node.js のセットアップ
- 依存関係のインストール
- テストの実行
- ビルドプロセス
- デプロイメント
```

### テスト自動化

#### シナリオ: 包括的テストスイート

**Step 1: テスト戦略の立案**
```
以下のテストレベルを実装してください：
- ユニットテスト（Jest）
- 統合テスト（Supertest）
- E2Eテスト（Cypress）
- パフォーマンステスト
```

**Step 2: テストデータとモック**
```
テスト用のファイクスチャとモックを作成してください：
- ユーザーデータ
- APIレスポンス
- データベースモック
- 外部サービスモック
```

## 実際の開発フロー例

### 新機能開発の1日

#### 朝の準備（9:00-9:30）
```
おはようございます。今日の作業を始めます。

今日のタスク：
- ユーザープロフィール編集機能の実装
- 画像アップロード機能の追加
- バリデーション機能の強化

作業環境の準備をお願いします。
```

#### 機能設計（9:30-10:30）
```
ユーザープロフィール編集機能の設計をお願いします：

要件：
- プロフィール画像のアップロード
- 基本情報の編集（名前、メール、電話番号）
- バリデーション（メール形式、電話番号形式）
- プレビュー機能
- 保存・キャンセル機能

UI mockup と API 仕様を作成してください。
```

#### 実装フェーズ（10:30-15:00）
```
設計に基づいて実装を開始してください：

1. バックエンド API の実装
2. フロントエンド コンポーネントの作成
3. 画像アップロード処理
4. バリデーション機能
5. テストケースの作成
```

#### テストとレビュー（15:00-17:00）
```
実装した機能のテストを実行してください：

1. ユニットテスト
2. 統合テスト
3. 手動テスト
4. コードレビュー
5. パフォーマンステスト

問題があれば修正してください。
```

#### 完了と documentation（17:00-18:00）
```
本日の作業の総仕上げをお願いします：

1. 最終テスト
2. ドキュメントの更新
3. コミットとプッシュ
4. プルリクエストの作成
5. 明日のタスクの準備
```

## 効果的な質問とコマンドの例

### 段階的なアプローチ

#### 基本から応用へ
```
❌ 悪い例:
「完全な e-commerce サイトを作って」

✅ 良い例:
「まず、商品一覧を表示するコンポーネントを作成してください」
→ 「商品詳細ページを追加してください」
→ 「ショッピングカート機能を実装してください」
→ 「決済処理を統合してください」
```

### コンテキストの提供

#### 具体的な指示
```
❌ 悪い例:
「エラーを修正して」

✅ 良い例:
「src/components/UserForm.tsx の validateEmail 関数で、
正規表現パターンが正しく動作していません。
現在は 'test@example' も有効として認識してしまいます。
'.com' や '.org' などの適切な TLD を要求するように修正してください。」
```

これらの例を参考に、Quincyを効果的に活用して開発生産性を向上させてください。